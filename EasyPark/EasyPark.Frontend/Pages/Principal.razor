@page "/principal"
@using System.Text.RegularExpressions
@using System.ComponentModel.DataAnnotations
@inject HttpClient Http

<MudGrid Class="pa-4" Justify="Justify.FlexStart" AlignItems="AlignItems.Center">
    <MudItem xs="12" sm="9" md="9">
        <MudGrid>
            <MudItem xs="6">
                <MudPaper Class="pa-4" Outlined="true">
                    <MudText Typo="Typo.h6">Motos</MudText>
                    <MudText Typo="Typo.h4" Color="Color.Primary">@motosOcu</MudText>
                </MudPaper>
            </MudItem>

            <MudItem xs="6">
                <MudPaper Class="pa-4" Outlined="true">
                    <MudText Typo="Typo.h6">Carros</MudText>
                    <MudText Typo="Typo.h4" Color="Color.Secondary">@carrosOcu</MudText>
                </MudPaper>
            </MudItem>
        </MudGrid>
    </MudItem>

    <MudItem xs="12" sm="3" md="3" Class="d-flex justify-end align-center">
        <MudButton Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large">
            Nuevo Ingreso
        </MudButton>
    </MudItem>
</MudGrid>

@code {

    public class ResumenBahias
    {
        public int bh_disponibles_carro { get; set; }
        public int bh_total_carro { get; set; }
        public int bh_disponibles_moto { get; set; }
        public int bh_total_moto { get; set; }
    }

    string motosOcu = "";
    string carrosOcu = "";

    protected override async Task OnInitializedAsync()
    {
        var resumen = await Http.GetFromJsonAsync<ResumenBahias>("api/bahias/resumen");

        if (resumen is not null)
        {
            motosOcu = $"{resumen.bh_disponibles_moto}/{resumen.bh_total_moto}";
            carrosOcu = $"{resumen.bh_disponibles_carro}/{resumen.bh_total_carro}";
        }
    }
}